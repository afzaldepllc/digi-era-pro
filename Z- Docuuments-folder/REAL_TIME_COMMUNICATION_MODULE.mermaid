graph TB
    Client["Client Browser<br/>(React/Next.js)"]
    LB["Load Balancer<br/>(Sticky Sessions)"]
    
    subgraph "Node.js Cluster"
        API1["API Server 1<br/>(Socket.io + REST)"]
        API2["API Server 2<br/>(Socket.io + REST)"]
        API3["API Server 3<br/>(Optional)"]
    end
    
    Redis["Redis Cluster<br/>(Socket.io Adapter<br/>+ Cache)"]
    MongoDB["MongoDB Atlas<br/>(M10+ Cluster)"]
    S3["AWS S3<br/>(File Storage)"]
    CloudFront["CloudFront CDN<br/>(S3 Cache)"]
    TURN["TURN Server<br/>(WebRTC Relay)"]
    
    Client -->|ws + http| LB
    LB -->|sticky| API1
    LB -->|sticky| API2
    LB -->|sticky| API3
    
    API1 -->|pub/sub| Redis
    API2 -->|pub/sub| Redis
    API3 -->|pub/sub| Redis
    
    Redis -->|cache| API1
    Redis -->|cache| API2
    Redis -->|cache| API3
    
    API1 -->|read/write| MongoDB
    API2 -->|read/write| MongoDB
    API3 -->|read/write| MongoDB
    
    API1 -->|upload/download| S3
    API2 -->|upload/download| S3
    Client -->|cdn| CloudFront
    CloudFront -->|cache| S3
    
    Client -->|webrtc signaling| API1
    Client -->|webrtc media| TURN
    
    style Client fill:#e1f5ff
    style LB fill:#fff3e0
    style API1 fill:#f3e5f5
    style API2 fill:#f3e5f5
    style API3 fill:#f3e5f5
    style Redis fill:#e8f5e9
    style MongoDB fill:#fce4ec
    style S3 fill:#fff9c4
    style CloudFront fill:#fff9c4
    style TURN fill:#ede7f6